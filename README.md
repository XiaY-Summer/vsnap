# vsnap

> è½»é‡çº§ç‰ˆæœ¬å¿«ç…§å·¥å…· â€”â€” ä¸ºæœ¬åœ°é¡¹ç›®åˆ›å»ºç‰ˆæœ¬å¿«ç…§ï¼Œéšæ—¶å›æº¯åˆ°ä»»æ„å†å²ç‰ˆæœ¬

vsnap æ˜¯ä¸€ä¸ªç®€æ´çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç±»ä¼¼äº Git çš„å¿«ç…§åŠŸèƒ½ï¼Œä½†æ›´è½»é‡ã€æ›´ä¸“æ³¨äºæ–‡ä»¶ç‰ˆæœ¬ç®¡ç†ã€‚å®ƒé€šè¿‡ SHA-256 å“ˆå¸Œå»é‡å­˜å‚¨æ–‡ä»¶ï¼Œæ”¯æŒè¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆmajor.minor.patchï¼‰ï¼Œé€‚åˆé¡¹ç›®å¤‡ä»½ã€å®éªŒåˆ†æ”¯ç®¡ç†æˆ–å¿«é€Ÿå›æ»šã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ“¦ **åˆå§‹åŒ–ä»“åº“**ï¼šåœ¨ä»»æ„ç›®å½•åˆ›å»º `.vsnap` ç‰ˆæœ¬ä»“åº“
- ğŸ“¸ **åˆ›å»ºå¿«ç…§**ï¼šæ”¯æŒ patch / minor / major ä¸‰ç§ç‰ˆæœ¬é€’å¢æ–¹å¼
- ğŸ·ï¸ **å¿«ç…§å¤‡æ³¨**ï¼šä¸ºæ¯æ¬¡å¿«ç…§æ·»åŠ  tagï¼Œä¾¿äºè¯†åˆ«
- ğŸ“‹ **åˆ—å‡ºå¿«ç…§**ï¼šæŸ¥çœ‹æ‰€æœ‰å†å²ç‰ˆæœ¬ã€å¤‡æ³¨å’Œåˆ›å»ºæ—¶é—´
- â†©ï¸ **ç‰ˆæœ¬è¿˜åŸ**ï¼šä¸€é”®å°†å·¥ä½œåŒºè¿˜åŸåˆ°æŒ‡å®šç‰ˆæœ¬
- ğŸ”’ **å†…å®¹å¯»å€**ï¼šåŸºäº SHA-256 å“ˆå¸Œå»é‡ï¼Œç›¸åŒå†…å®¹åªå­˜ä¸€ä»½
- ğŸš« **æ™ºèƒ½è·³è¿‡**ï¼šæœªå˜æ›´çš„æ–‡ä»¶åœ¨åˆ›å»ºå¿«ç…§æ—¶è‡ªåŠ¨è·³è¿‡

## å¿«é€Ÿå¼€å§‹

### ç¼–è¯‘ç¯å¢ƒè¦æ±‚

- **C++17** æˆ–æ›´é«˜ç‰ˆæœ¬
- **CMake** 3.10+
- **OpenSSL** å¼€å‘åº“


### ä½¿ç”¨ç¤ºä¾‹

```bash
# 1. åˆå§‹åŒ–ä»“åº“ï¼ˆåˆ›å»º .vsnap å¹¶ç”Ÿæˆåˆå§‹å¿«ç…§ 0.1.0ï¼‰
vsnap --init

# 2. åˆ›å»ºæ–°å¿«ç…§ï¼ˆé»˜è®¤ patch é€’å¢ï¼š0.1.0 -> 0.1.1ï¼‰
vsnap --snap

# 3. åˆ›å»º minor ç‰ˆæœ¬å¿«ç…§ï¼ˆ0.1.1 -> 0.2.0ï¼‰ï¼Œå¹¶æ·»åŠ å¤‡æ³¨
vsnap --snap --option minor -t "å®Œæˆæ–°åŠŸèƒ½"

# 4. åˆ—å‡ºæ‰€æœ‰å¿«ç…§
vsnap --list

# 5. æŸ¥çœ‹å½“å‰ç‰ˆæœ¬å·
vsnap --show

# 6. è¿˜åŸåˆ°æŒ‡å®šç‰ˆæœ¬
vsnap --restore 0.1.0
```

## å‘½ä»¤å‚è€ƒ

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `vsnap -h, --help` | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ |
| `vsnap --init` | åˆå§‹åŒ–ä»“åº“ |
| `vsnap --list` | åˆ—å‡ºæ‰€æœ‰å¿«ç…§ |
| `vsnap --show` | æ˜¾ç¤ºå½“å‰ç‰ˆæœ¬å· |
| `vsnap --snap` | åˆ›å»ºæ–°å¿«ç…§ |
| `vsnap --snap [--option patch\|minor\|major] [-t "å¤‡æ³¨"]` | æŒ‡å®šç‰ˆæœ¬é€’å¢æ–¹å¼å¹¶æ·»åŠ å¤‡æ³¨ |
| `vsnap -r, --restore <ç‰ˆæœ¬å·>` | è¿˜åŸåˆ°æŒ‡å®šç‰ˆæœ¬ |

## ä»“åº“ç»“æ„

åˆå§‹åŒ–åï¼Œä¼šåœ¨å½“å‰ç›®å½•åˆ›å»º `.vsnap` ç›®å½•ï¼š

```
.vsnap/
â”œâ”€â”€ config.json       # ç‰ˆæœ¬é…ç½®
â”œâ”€â”€ snapshots/        # å¿«ç…§å…ƒæ•°æ®ï¼ˆç‰ˆæœ¬å·.jsonï¼‰
â”‚   â”œâ”€â”€ 0.1.0.json
â”‚   â””â”€â”€ 0.2.0.json
â””â”€â”€ objects/          # å†…å®¹å¯»å€å­˜å‚¨ï¼ˆå“ˆå¸Œ.binï¼‰
```

- **snapshots/**ï¼šè®°å½•æ¯ä¸ªå¿«ç…§çš„ç‰ˆæœ¬å·ã€å¤‡æ³¨ã€åˆ›å»ºæ—¶é—´åŠæ–‡ä»¶æ¸…å•
- **objects/**ï¼šä»¥ SHA-256 å“ˆå¸Œå‘½åçš„æ–‡ä»¶å‰¯æœ¬ï¼Œç›¸åŒå†…å®¹çš„æ–‡ä»¶åªå­˜ä¸€ä»½

## é¡¹ç›®ç»“æ„

```
vsnap/
â”œâ”€â”€ CMakeLists.txt
â”œâ”€â”€ README.md
â”œâ”€â”€ include/
â”‚   â”œâ”€â”€ option.hpp    # æ ¸å¿ƒé€»è¾‘ï¼ˆinit/snap/list/restore/showï¼‰
â”‚   â”œâ”€â”€ file.hpp      # æ–‡ä»¶æ‰«æã€å¤§å°ã€ä¿®æ”¹æ—¶é—´
â”‚   â”œâ”€â”€ hash.hpp      # SHA-256 å“ˆå¸Œè®¡ç®—
â”‚   â”œâ”€â”€ log.hpp       # æ—¥å¿—è¾“å‡º
â”‚   â”œâ”€â”€ time.hpp      # æ—¶é—´å·¥å…·
â”‚   â”œâ”€â”€ nlohmann/     # JSON åº“ï¼ˆheader-onlyï¼‰
â”‚   â””â”€â”€ openssl/      # OpenSSL å¤´æ–‡ä»¶
â””â”€â”€ src/
    â””â”€â”€ main.cpp      # å…¥å£ä¸å‚æ•°è§£æ
```

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼
